{% extends 'tiffin_app/base.html' %}
{% block title %}Daily Entry{% endblock %}
{% block page_title %}Daily Entry{% endblock %}

{% block top_actions %}
<a href="{% url 'daily_entry_add' %}" class="btn btn-primary">+ Create Order</a>
{% endblock %}
{% block content %}
<div class="main-content">
    
        <div class="card">
            <div class="card-body">
                <form method="get" class="filters">
                    <div class="form-group">
                        <label class="form-label">Date</label>
                        <input type="date" name="date" class="form-control" value="{{ entry_date }}" onchange="this.form.submit()">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Meal Type</label>
                        <div class="toggle-group">
                            <button type="button" class="toggle-btn {% if meal_type == 'LUNCH' %}active{% endif %}" onclick="window.location='?date={{ entry_date }}&meal_type=LUNCH'">Lunch</button>
                            <button type="button" class="toggle-btn {% if meal_type == 'DINNER' %}active{% endif %}" onclick="window.location='?date={{ entry_date }}&meal_type=DINNER'">Dinner</button>
                        </div>
                    </div>
                </form>
                <table class="table">
                    <thead>
                        <tr><th>Customer</th><th>Delivery Location</th><th>Total Amount</th><th>Actions</th></tr>
                    </thead>
                    <tbody>
                        {% for entry in entries %}
                        <tr>
                            <td><strong>{{ entry.customer.name }}</strong></td>
                            <td>{{ entry.customer.delivery_location }}</td>
                            <td>â‚¹{{ entry.total_amount }}</td>
                            <td>
                                <a href="{% url 'daily_entry_detail' entry.pk %}" class="btn btn-sm btn-primary">Open</a>
                            </td>
                        </tr>
                        {% empty %}
                        <tr><td colspan="4" class="text-center">No orders for this date and meal type</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}
